<section class="border border-teal-100 sm:m-0 md:m-4">
    <section class="text-center bg-teal-100 mb-4">
        <h3 class="page-title">{{this.username}}'s Inventory</h3>
        <p>Value: ${{#if this.ownedValue}}{{this.ownedValue}}{{else}}0.00{{/if}}</p>
    </section>
    <div class="w-full mx-auto">
        {{>filter}}
        <table class="table-container w-full">
            <thead>
                <tr class="table-header-row">
                    <th class="table-header pl-2" data-sort="owned">
                        <a href="?sort=owned&direction={{#if (and (eq sort " owned") (eq direction "desc"
                            ))}}asc{{else}}desc{{/if}}" class="sort-btn {{#if (eq sort " owned")}}active{{/if}}">
                            Owned
                            {{#if (eq sort "owned")}}
                            {{#if (eq direction "desc")}}
                            <span class="sort-icon">
                                <svg class="w-3 h-3" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 14l6-6H4l6 6z" />
                                </svg>
                            </span>
                            {{else}}
                            <span class="sort-icon">▲</span>
                            {{/if}}
                            {{else}}
                            <span class="sort-icon text-gray-300">
                                <svg class="w-3 h-3" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 14l6-6H4l6 6z" />
                                </svg>
                            </span>
                            {{/if}}
                        </a>
                    </th>
                    <th class="table-header" data-sort="name">
                        <a href="?sort=name&direction={{#if (and (eq sort " name") (eq direction "desc"
                            ))}}asc{{else}}desc{{/if}}" class="sort-btn {{#if (eq sort " name")}}active{{/if}}">
                            Name
                            {{#if (eq sort "name")}}
                            {{#if (eq direction "desc")}}
                            <span class="sort-icon">
                                <svg class="w-3 h-3" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 14l6-6H4l6 6z" />
                                </svg>
                            </span>
                            {{else}}
                            <span class="sort-icon">▲</span>
                            {{/if}}
                            {{else}}
                            <span class="sort-icon text-gray-300">
                                <svg class="w-3 h-3" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 14l6-6H4l6 6z" />
                                </svg>
                            </span>
                            {{/if}}
                        </a>
                    </th>
                    <th class="table-header" data-sort="set">
                        <a href="?sort=set&direction={{#if (and (eq sort " set") (eq direction "desc"
                            ))}}asc{{else}}desc{{/if}}" class="sort-btn {{#if (eq sort " set")}}active{{/if}}">
                            Set
                            {{#if (eq sort "set")}}
                            {{#if (eq direction "desc")}}
                            <span class="sort-icon">
                                <svg class="w-3 h-3" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 14l6-6H4l6 6z" />
                                </svg>
                            </span>
                            {{else}}
                            <span class="sort-icon">▲</span>
                            {{/if}}
                            {{else}}
                            <span class="sort-icon text-gray-300">
                                <svg class="w-3 h-3" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 14l6-6H4l6 6z" />
                                </svg>
                            </span>
                            {{/if}}
                        </a>
                    </th>
                    <th class="table-header" data-sort="price">
                        <a href="?sort=price&direction={{#if (and (eq sort " price") (eq direction "desc"
                            ))}}asc{{else}}desc{{/if}}" class="sort-btn {{#if (eq sort " price")}}active{{/if}}">
                            Price
                            {{#if (eq sort "price")}}
                            {{#if (eq direction "desc")}}
                            <span class="sort-icon">
                                <svg class="w-3 h-3" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 14l6-6H4l6 6z" />
                                </svg>
                            </span>
                            {{else}}
                            <span class="sort-icon">▲</span>
                            {{/if}}
                            {{else}}
                            <span class="sort-icon text-gray-300">
                                <svg class="w-3 h-3" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 14l6-6H4l6 6z" />
                                </svg>
                            </span>
                            {{/if}}
                        </a>
                    </th>
                    <th class="table-header pr-2 xs-hide"></th>
                </tr>
            </thead>
            <tbody>
                {{#each cards as |card|}}
                <tr class="table-row">
                    <td class="pl-2">{{>cardsOwned card=card}}</td>
                    <td class="card-name-link" data-id="{{card.cardId}}" data-img-src="{{card.imgSrc}}">
                        <a href="{{card.url}}">{{card.name}}</a>
                        {{>reserved card=card}}
                        <a href="{{card.url}}" class="card-img-link">
                            <img src="{{card.imgSrc}}" alt="{{card.name}}" class="card-img-preview" />
                        </a>
                    </td>
                    <td>
                        <a href="/sets/{{card.setCode}}">
                            <i class="ss ss-{{card.setCode}} ss-{{toLowerCase card.rarity}} ss-fw"></i>
                            {{toUpperCase card.setCode}}
                        </a>
                    </td>
                    <td>
                        <span class="price-{{#if card.isFoil}}foil{{else}}normal{{/if}}">
                            {{card.priceValue}}
                        </span>
                    </td>
                    <td class="delete-inventory-entry pr-2 xs-hide">
                        <form class="delete-inventory-form" data-item-id="{{card.cardId}}">
                            <input type="hidden" name="card-id" value="{{card.cardId}}" />
                            <input type="hidden" name="isFoil" value="{{card.isFoil}}" />

                            <button type="button" class="delete-inventory-button">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </form>
                    </td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</section>

{{>pagination}}

<script src="/public/js/updateInventory.js" defer></script>