<div>
    <section class="text-center bg-teal-100 mb-4">
        <h3 class="page-title flex items-center justify-center space-x-2">
            <i class="ss ss-{{set.keyruneCode}} ss-2x"></i>
            <span>{{set.name}}</span>
        </h3>
        <ul clas="mt-4 space-y-2 text-left">
            <li class="text-gray-700">Block: {{set.block}}</li>
            <li class="text-gray-700">Code: {{set.code}}</li>
            <li class="text-gray-700">Release Date: {{set.releaseDate}}</li>
        </ul>
    </section>
</div>
<div>
    <table class="table-container">
        <thead>
            <tr class="table-header-row">
                <th class="table-header pl-2"># Owned</th>
                <th class="table-header">Card No.</th>
                <th class="table-header">Name</th>
                <th class="table-header">Mana Cost</th>
                <th class="table-header">Rarity</th>
                <th class="table-header">Price</th>
                <th class="table-header pr-2">Foil Price</th>
            </tr>
        </thead>
        <tbody>
            {{#each set.cards}}
            <tr class="table-row">
                <td class="py-2 pl-2">
                    {{>inventoryCtrl card=this}}
                </td>
                <td class="py-2">{{this.number}}</td>
                <td class="card-name-link py-2" data-id="{{this.cardId}}" data-img-src="{{this.imgSrc}}">
                    <a href="{{this.url}}">{{this.name}}</a>
                    {{>reserved card=this}}
                    <a href="{{this.url}}" class="card-img-link">
                        <img src="{{this.imgSrc}}" alt="{{this.name}}" class="card-img-preview" />
                    </a>
                </td>
                <td class="py-2">{{>manaCost card=this}}</td>
                <td class="py-2">{{this.rarity}}</td>
                <td class="py-2">
                    {{#if this.hasNormal}}
                    <span class="price-normal">{{this.normalPrice}}</span>
                    {{/if}}
                </td>
                <td class="py-2 pr-2">
                    {{#if this.hasFoil}}
                    <span class="price-foil">{{this.foilPrice}}</span>
                    {{/if}}
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>

<div class="pagination-container">
    {{#if pagination.hasPrevPage}}
    <a href="/sets/{{set.code}}/page/1/limit/{{pagination.limit}}"
        class="pagination-btn pagination-btn-tertiary">&laquo;</a>
    {{/if}}

    {{#if pagination.hasPrevPage}}
    <a href="/sets/{{set.code}}/page/{{pagination.prevPage}}/limit/{{pagination.limit}}"
        class="pagination-btn pagination-btn-primary">&lt;</a>
    {{/if}}

    {{#if pagination.skipBackPage}}
    <a href="/sets/{{set.code}}/page/{{pagination.skipBackPage}}/limit/{{pagination.limit}}"
        class="pagination-btn pagination-btn-tertiary">{{pagination.skipBackPage}}</a>
    <span>...</span>
    {{/if}}

    <span class="pagination-btn pagination-btn-secondary">{{pagination.currentPage}}</span>

    {{#if pagination.skipForwardPage}}
    <span>...</span>
    <a href="/sets/{{set.code}}/page/{{pagination.skipForwardPage}}/limit/{{pagination.limit}}"
        class="pagination-btn pagination-btn-tertiary">{{pagination.skipForwardPage}}</a>
    {{/if}}

    {{#if pagination.hasNextPage}}
    <a href="/sets/{{set.code}}/page/{{pagination.nextPage}}/limit/{{pagination.limit}}"
        class="pagination-btn pagination-btn-primary">&gt;</a>
    {{/if}}

    {{#if pagination.hasNextPage}}
    <a href="/sets/{{set.code}}/page/{{pagination.totalPages}}/limit/{{pagination.limit}}"
        class="pagination-btn pagination-btn-tertiary">&raquo;</a>
    {{/if}}

    <form id="limitForm" class="flex items-center gap-2 mb-4 mt-2">
        <select id="limit" name="limit" class="input-field w-20 text-center py-1 pl-0 pr-2 
                text-xs sm:text-sm bg-white border border-teal-300 rounded focus:ring-2 
                focus:ring-teal-200 focus:outline-none">
            <option value="10" {{#if (eq pagination.limit 10)}}selected{{/if}}>10</option>
            <option value="20" {{#if (eq pagination.limit 20)}}selected{{/if}}>20</option>
            <option value="50" {{#if (eq pagination.limit 50)}}selected{{/if}}>50</option>
        </select>
        <label for="limit" class="text-sm font-medium text-teal-700">per page</label>
    </form>
    <script>
        document.getElementById("limit").addEventListener("change", function () {
            var limit = this.value;
            var page = {{ pagination.currentPage }};
            var code = "{{ set.code }}";
            window.location.href = "/sets/" + code + "/page/" + page + "/limit/" + limit;
        });
    </script>
</div>

<script src="/public/js/updateInventory.js" defer></script>