<link href="//cdn.jsdelivr.net/npm/mana-font@latest/css/mana.min.css" rel="stylesheet" type="text/css" />
<div>
    <section class="text-center bg-teal-100 mb-4">
        <h3 class="page-title flex items-center justify-center space-x-2">
            <i class="ss ss-{{set.keyruneCode}} ss-2x"></i>
            <span>{{set.name}}</span>
        </h3>
        <ul class="mt-4 space-y-2">
            <li class="text-gray-700">Block: {{set.block}}</li>
            <li class="text-gray-700">Code: {{toUpperCase set.code}}</li>
            <li class="text-gray-700">Release Date: {{set.releaseDate}}</li>
            {{!-- TODO: Use Base/Main Set Price for Normal as default --}}
            {{!-- TODO: Add Button to show pop-up with all Set Price info:
            Base-Normal,
            Base-All,
            All-Normal,
            All-All
            --}}
            <li class="text-gray-700"><span>{{>setPriceInfo set=set}}</span>Set Price: {{set.prices.basePriceNormal}}
            </li>
            {{#if authenticated}}
            <li class="text-gray-700">Total Owned: {{set.ownedTotal}}/{{set.setSize}}</li>
            <li class="text-gray-700">Owned Value: {{set.ownedValue}}</li>
            <li class="text-gray-700">{{>completionRate set}}</li>
            {{/if}}
        </ul>
    </section>
</div>
<div class="w-full mx-auto">
    {{>filter}}
    <table class="table-container">
        <thead>{{>tableHeadersRow}}</thead>
        <tbody>
            {{#each set.cards}}
            <tr class="table-row">
                <td class="py-2 pl-2">
                    {{>inventoryCtrl card=this}}
                </td>
                <td class="py-2">{{this.number}}</td>
                <td class="card-name-link py-2" data-id="{{this.cardId}}" data-img-src="{{this.imgSrc}}">
                    <a href="{{this.url}}">{{this.name}}</a>
                    {{>reserved card=this}}
                    <a href="{{this.url}}" class="card-img-link">
                        <img src="{{this.imgSrc}}" alt="{{this.name}}" class="card-img-preview" />
                    </a>
                </td>
                <td class="py-2 xs-hide">{{>manaCost card=this}}</td>
                <td class="py-2 xs-hide">{{this.rarity}}</td>
                <td class="py-2 xs-hide">
                    {{#if this.hasNormal}}
                    <span class="price-normal">{{this.normalPrice}}</span>
                    {{/if}}
                </td>
                <td class="py-2 pr-2 xs-hide">
                    {{#if this.hasFoil}}
                    <span class="price-foil">{{this.foilPrice}}</span>
                    {{/if}}
                </td>
                <td class="py-2 pr-2 xs-show">
                    {{#if this.hasFoil}}
                    <span class="price-foil">{{this.foilPrice}}</span>
                    {{/if}}
                    {{#if this.hasNormal}}
                    <span class="price-normal">{{this.normalPrice}}</span>
                    {{/if}}
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>

{{>pagination}}

<script src="/public/js/updateInventory.js" defer></script>